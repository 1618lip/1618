function typeWriter(t,e,n){e<t.length?(document.getElementById("typewriter").innerHTML=t.substring(0,e+1)+'<span aria-hidden="true"></span>',setTimeout((()=>typeWriter(t,e+1,n)),70)):"function"==typeof n&&setTimeout(n,1e3)}function startTextAnimation(t){t>=typewriterPhrases.length&&(t=0),typeWriter(typewriterPhrases[t],0,(()=>startTextAnimation(t+1)))}function resizeCanvas(){dspcanvas.width=window.innerWidth,dspcanvas.height=Math.max(300,.4*window.innerHeight)}function hann(t,e){return.5*(1-Math.cos(2*Math.PI*t/(e-1)))}function triangle(t,e){return(1-Math.abs((t-e/2)/(e/2)))*(.9+.2*Math.random())}function sinc(t,e){const n=t-e/2;return 0===n?1:Math.sin(Math.PI*n/10)/(Math.PI*n/10)}function sawtooth(t,e){return t%e/e}function absSine(t,e){return Math.abs(Math.sin(2*Math.PI*t/e))}function inverseTri(t,e){return 1-(1-Math.abs((t-e/2)/(e/2)))**2}function exponentialEdge(t,e){const n=(t-e/2)/(e/2);return 1-Math.exp(-10*Math.abs(n))}function noisyWindow(t,e){return.5*(1-Math.cos(2*Math.PI*t/(e-1)))*(.9+.2*Math.random())}function genWindow(t,e,n=100){const a=Array(N).fill(0),o=windowFunctions[e],i=n/2,s=Math.max(0,t-i),r=Math.min(N,t+i)-s;for(let t=0;t<r;t++)a[s+t]=o(t,r);return a}function interpolateWindow(t,e,n){return t.map(((t,a)=>(1-n)*t+n*e[a]))}function animate(){function t(t,e){ctx.beginPath();for(let e=0;e<N;e++){const a=e/N*dspcanvas.width,o=n-80*t[e];0===e?ctx.moveTo(a,o):ctx.lineTo(a,o)}ctx.strokeStyle=e,ctx.lineWidth=2,ctx.stroke()}const e=Date.now();if(isMouseOverCanvas||(autoX+=autoV,(autoX<50||autoX>dspcanvas.width-50)&&(autoV*=-1),mouseX=autoX),e-lastSwitch>SWITCH_INTERVAL){currentWindow=nextWindow;const t=transitions[currentWindow];nextWindow=t[Math.floor(Math.random()*t.length)],windowMix=0,lastSwitch=e}windowMix=Math.min((e-lastSwitch)/TRANSITION_DURATION,1),ctx.clearRect(0,0,dspcanvas.width,dspcanvas.height);const n=.6*dspcanvas.height;animate.smoothedX||(animate.smoothedX=mouseX);const a=isIdle?autoX:mouseX;animate.smoothedX+=.1*(a-animate.smoothedX);const o=Math.floor(animate.smoothedX/dspcanvas.width*N),i=interpolateWindow(genWindow(o,currentWindow),genWindow(o,nextWindow),windowMix),s=rect.map(((t,e)=>t*i[e]));nameLetters.forEach(((t,e)=>{const n=Math.floor(e/nameLetters.length*N),a=s[n]||0,o=.7+a;t.style.transform=`scale(${o})`,t.style.opacity=.6+.4*a})),t(rect,"rgba(128, 128, 128, 0.2)"),t(i,"rgba(0, 255, 255, 0.2)"),t(s,"rgba(0, 255, 0, 1)");const r=sections.length;sections.forEach(((t,e)=>{const n=Math.floor((e+.5)*N/r),a=i[n]||0,o=.6+1.5*a,s=.2+.8*a;t.style.transform=o({scale:o}),t.style.opacity=s})),currentWindowPlot=i,requestAnimationFrame(animate)}function resizeParticleCanvas(){pCanvas.width=window.innerWidth,pCanvas.height=window.innerHeight}function drawParticleBackground(){pCtx.clearRect(0,0,pCanvas.width,pCanvas.height);for(let t=PARTICLES.length-1;t>=0;t--){const e=PARTICLES[t],n=mouse.x-e.x,a=mouse.y-e.y,o=Math.sqrt(n*n+a*a)+1e-4,i=Math.exp(-o/40);e.decay?(e.opacity-=e.decay,e.life--):(e.vx*=.92,e.vy*=.92,e.vx+=n/o*.2*i,e.vy+=a/o*.2*i,e.opacity=.13+.8*i),e.x+=e.vx,e.y+=e.vy,e.opacity>0&&(pCtx.beginPath(),pCtx.arc(e.x,e.y,2,0,2*Math.PI),pCtx.fillStyle=`rgba(173, 216, 230, ${Math.max(0,e.opacity)})`,pCtx.shadowColor=`rgba(173, 216, 230, ${Math.max(0,e.opacity)})`,pCtx.shadowBlur=e.decay?20:6,pCtx.fill(),pCtx.shadowBlur=0),(e.opacity<=0||e.life<=0)&&PARTICLES.splice(t,1)}for(let t of PARTICLES)t.life--,t.opacity-=t.decay,t.opacity<=0||t.life<=0||(ctx.beginPath(),ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),ctx.fillStyle=`rgba(255,255,255,${t.opacity})`,ctx.fill());mouseInsideObject?(pCtx.beginPath(),pCtx.arc(mouse.x,mouse.y,5,0,2*Math.PI),pCtx.fillStyle="rgba(0,255,255,0.05)",pCtx.fill()):(pCtx.beginPath(),pCtx.arc(mouse.x,mouse.y,10,0,2*Math.PI),pCtx.fillStyle="rgba(0,255,255,0.2)",pCtx.shadowColor="#0ff",pCtx.shadowBlur=30,pCtx.fill(),pCtx.shadowBlur=0),requestAnimationFrame(drawParticleBackground)}const heroName=document.getElementById("hero-name"),nameLetters=document.querySelectorAll(".name-letter");let isMouseOverCanvas=!1,allowCursorControl=!1,currentWindowPlot=[];const typewriterPhrases=["3rd year CE Student @ UCSD","interested in DSP, Optimization, ML, and Software Development"];document.addEventListener("DOMContentLoaded",(()=>{startTextAnimation(0),animate()}));const observer=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&t.target.classList.add("show")}))}));document.querySelectorAll(".hidden, .hidden-left, .hidden-right").forEach((t=>observer.observe(t)));const dspcanvas=document.getElementById("canvas"),ctx=dspcanvas.getContext("2d");dspcanvas.style.position="absolute",dspcanvas.style.left="0",dspcanvas.style.top="0",dspcanvas.style.zIndex="-1",dspcanvas.style.pointerEvents="none",document.body.style.margin="0",document.body.style.overflowX="hidden",window.addEventListener("resize",resizeCanvas),resizeCanvas();const N=356,rect=Array(N).fill(0).map(((t,e)=>Math.sin(12*Math.PI*e/N)));let mouseX=dspcanvas.width/2,lastMove=Date.now(),autoX=mouseX,autoV=3,isIdle=!1;document.addEventListener("mousemove",(t=>{mouseX=t.clientX,lastMove=Date.now()}));const windowFunctions={hann:hann,triangle:triangle,sinc:sinc,sawtooth:sawtooth,absSine:absSine,inverseTri:inverseTri,exponentialEdge:exponentialEdge,noisyWindow:noisyWindow},windowKeys=Object.keys(windowFunctions);let currentWindow=windowKeys[0],nextWindow=windowKeys[0],windowMix=1;const transitions={};windowKeys.forEach((t=>{transitions[t]=windowKeys.filter((e=>e!==t))}));let lastSwitch=Date.now();const SWITCH_INTERVAL=4e3,TRANSITION_DURATION=1e3,sections=document.querySelectorAll(".section");dspcanvas.addEventListener("mouseenter",(()=>{isMouseOverCanvas=!0})),dspcanvas.addEventListener("mouseleave",(()=>{isMouseOverCanvas=!1,mouseX=Math.max(0,Math.min(mouseX,dspcanvas.width)),autoX=mouseX})),dspcanvas.addEventListener("mousemove",(t=>{if(!isMouseOverCanvas)return;const e=dspcanvas.getBoundingClientRect();mouseX=t.clientX-e.left,lastMove=Date.now()})),document.addEventListener("mousemove",(t=>{const e=dspcanvas.getBoundingClientRect(),n=t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom;if(isMouseOverCanvas=n,!n)return void(allowCursorControl=!1);const a=t.clientX-e.left,o=t.clientY-e.top;mouseX=a,lastMove=Date.now();const i=Math.floor(a/dspcanvas.width*N),s=.6*dspcanvas.height-80*(currentWindowPlot[i]||0),r=40;allowCursorControl=Math.abs(o-s)<r})),animate();let wasInsideObject=!1;const pCanvas=document.getElementById("particle-bg"),pCtx=pCanvas.getContext("2d");let mouse={x:window.innerWidth/2,y:window.innerHeight/2},mouseInsideObject=!1;window.addEventListener("resize",resizeParticleCanvas),resizeParticleCanvas();const PARTICLE_COUNT=720,PARTICLES=[];for(let t=0;t<PARTICLE_COUNT;t++)PARTICLES.push({x:Math.random()*pCanvas.width,y:Math.random()*pCanvas.height,vx:.3*(Math.random()-.5),vy:.3*(Math.random()-.5),opacity:.3});document.addEventListener("mousemove",(t=>{mouse.x=t.clientX,mouse.y=t.clientY}));let exitPoint={x:0,y:0};document.querySelectorAll(".project-card-wrapper").forEach((t=>{t.addEventListener("mouseenter",(()=>{wasInsideObject=mouseInsideObject,mouseInsideObject=!0})),t.addEventListener("mouseenter",(()=>{mouseInsideObject=!0})),t.addEventListener("mousemove",(e=>{if(mouseInsideObject){t.getBoundingClientRect();exitPoint.x=e.clientX,exitPoint.y=e.clientY}})),t.addEventListener("mouseleave",(()=>{mouseInsideObject=!1;const e=t.getBoundingClientRect(),n=e.left+e.width/2,a=e.top+e.height/2,o=exitPoint.x-n,i=exitPoint.y-a,s=Math.sqrt(o*o+i*i),r=o/s,c=i/s;for(let t=0;t<25;t++){const t=3+3*Math.random(),e=1.5*(Math.random()-.5),n=Math.atan2(c,r)+e;PARTICLES.push({x:exitPoint.x,y:exitPoint.y,vx:t*Math.cos(n)*.8,vy:t*Math.sin(n)*.8,opacity:1,decay:5e-4,life:600+200*Math.random()})}}))})),drawParticleBackground();